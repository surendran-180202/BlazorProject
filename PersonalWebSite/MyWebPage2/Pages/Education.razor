@page "/Education"
@using MyWebPage2.Data
@inject NavigationManager uriHelper;
@inject UserServices dataAccessLayer

<PageTitle>Education</PageTitle>

<div class="Title">
    <h1>Education: </h1>

</div>
<br/>
<div class="container">
    <div class="gradient-cards">
       @* <div class="card">
            <div class="container-card  bg-blue-box">
                <p class="card-title">Primary school</p>
                <p class="card-description">Year:2016-2017<br />Class:10 th<br />Institute: Zkm.Hr.Sec.School <br />percentage:81% </p>
                <i class="fa fa-heart" @onclick="IncrementCount"></i><label> @currentCount</label>
                <i class="fas fa-comment"></i><label> @currentCount</label>
            </div>
        </div>

        <div class="card">
            <div class="container-card  bg-blue-box">
                <p class="card-title">Secodary School</p>
                <p class="card-description">Year: 2018-2019<br />Class:12 th<br/>Institute: Zkm.Hr.Sec.School <br />percentage:55% </p>
                <i class="fa fa-heart" @onclick="IncrementCount"></i><label> @currentCount</label>
                <i class="fas fa-comment"></i><label> @currentCount</label>
            </div>
        </div>

        <div class="card">
            <div class="container-card  bg-blue-box">
                <p class="card-title">UnderGraduate</p>
                <p class="card-description">Year: 2019-2023<br />Institute:NSCET <br />Degree :BE/ECE<br />CGPA:8 </p>
                <i class="fa fa-heart" @onclick="IncrementCount"></i><label> @currentCount</label>
                <i class="fas fa-comment"></i><label> @currentCount</label>
            </div>
        </div>

        <div class="card">
            <div class="container-card bg-blue-box">
                <p class="card-title">PostGraduate</p>
                <p class="card-description">Year: Loding . . .<br />Degree :BE/ECE<br />Institute:Loding . . .<br />CGPA:Loding . . .</p>
                <i class="fa fa-heart" @onclick="IncrementCount" ></i><label> @currentCount</label>
                <i class="fas fa-comment"></i><label> @currentCount</label>
            </div>
        </div>*@



        @if(EducationDetails == null)
        {
            <p><em>Loading...</em></p>
        }
        else
        {
            @foreach(var educationDetails in EducationDetails)
            {
                <div class="card">
                    <div class="container-card bg-blue-box">
                        <p class="card-title" >@educationDetails.TITLE</p>
                        <p class="card-description">Year: @educationDetails.YEAR<br />Degree :@educationDetails.CLASS<br />Institute:@educationDetails.INSTITUTE<br />CGPA:@educationDetails.PERCENTAGE</p>
                        <i class="fa fa-heart" @onclick="IncrementCount"></i><label> @educationDetails.LIKES</label>
                        <i class="fas fa-comment" @onclick="OpenPopUp"></i><label> @currentCount</label>
                    </div>
                </div>
                
            }
        }
        <div class="@PopUp">
            <div class="form-popup">
                <button type="button" class="cancelbtn" @onclick="closePopUp"><i class="fa fa-plus-circle" style="transform: rotate(45deg);color:lightcoral;"></i></button>
                <div class="form-container">
                    <h4>Commends</h4>
                    <input type="text" placeholder="Leave Your Commends">
                    <button type="submit" class="SubmitCmdBtn"><i class="fa fa-arrow-circle-right"></i></button>
                    <br /><br />
                    <div class="table">
                         <table>
                        @foreach(var educationDetails in EducationDetails)
                        {
                            @foreach(var i in educationDetails.COMMENT)
                            {
                               <tr>
                                   <th>
                                       <div class="row">
                                           <div class="col-md-1"><div class="CommentUser"><img src="../css/images/image7.jpg" /></div></div>
                                           <div class="col-md-6"><p>@i.COMMENTEDUSER</p></div>
                                       </div>
                                   </th>
                               </tr>
                               <tr><td><p class="cmd">@i.COMMENT</p></td></tr>
                                
                            }
                        }
                        </table>
                       
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    List<tblEducationDetails> EducationDetails = new List<tblEducationDetails>();

    UserServices userService = new UserServices();
    private string? PopUp { get; set; }  


    protected override void OnInitialized()
    {
        PopUp = "popuphide";
        EducationDetails = userService.Education();

    }
    private void OpenPopUp()
    {
        PopUp = "popupshow";
    }
    private void closePopUp()
    {
        PopUp = "popuphide";
    }

    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }

}
