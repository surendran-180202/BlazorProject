@page "/ProfilePage"
@using MyWebPage2.Data
@inject NavigationManager uriHelper;
@inject UserServices dataAccessLayer
<PageTitle>ProfilePage</PageTitle>


<h3 style="color:white;position:fixed;">ProfilePage:</h3>
<br/>

<div class="row">
    <div class="col-md-3">
        <div class="nav" >
            <ul>
                <li @onclick="PersonalDetails"><i class='fas fa-user-circle' style='font-size:24px'></i>PersonalInfo</li>
                <li @onclick="EducationDetails"><i class='fas fa-user-graduate' style='font-size:24px'></i>EducationInfo</li>
                <li><i class='fas fa-laptop-code' style='font-size:24px'></i>ExperienceInfo</li>
                <li><i class='fas fa-cogs' style='font-size:24px'></i>Settings</li>
            </ul>
        </div>
        <p class="about"><i class="fa fa-exclamation-circle"></i>about</p>
    </div>
    <div class="col-md-7">
        @foreach(var i in tblUserInfo)
        {
        <div class="@PersonalDetailsContent">
            <center>
                <h3>welcome Mr.Surendran</h3>
                <div class="profileBackground">
                    <div class="profilePhoto"> <img src="@($"data:image/png;base64,{Convert.ToBase64String(i.USERIMAGE)}")" class="image" /> @*<img src=@imageSource class="image" />*@</div>
                </div>
            </center>
            <div class="content">
                <div class="card">
                    <div class="container-card bg-blue-box">
                        <p class="card-title">PersonalInfo</p>
                        <table >
                           <tr>
                                <th>Name</th>
                                <td>@i.NAME</td>
                           </tr>
                                <tr>
                                    <th>LastName</th>
                                    <td>@i.LASTNAME</td>
                                </tr>
                            <tr>
                                <th>BirthDay</th>
                                <td>@i.BIRTHDAY</td>
                            </tr>
                            <tr>
                                <th>Gender</th>
                                <td>@i.GENDER</td>
                           </tr>
                          
                        </table> 
                     
                        <center>
                            <button class="btnclass" @onclick="manageboxinfo">Manage Your PersonalInfo</button>
                        </center>

                    </div>
                </div>
            </div>

            <div class="content">
                <div class="card">
                    <div class="container-card bg-blue-box">
                        <p class="card-title">ContactInfo</p>
                            <p class="card-description">Phone:@i.PHONE<br />Email:@i.EMAIL</p>
                        <center>
                            <button class="btnclass">Manage Your ContactInfo</button>
                        </center>
                    </div>
                </div>
            </div>
            <div class="content">
                <div class="card">
                    <div class="container-card bg-blue-box">
                        <p class="card-title">AddressInfo</p>
                            <p class="card-description">@i.ADDRESS</p>
                        <center>
                            <button class="btnclass">Manage Your AddressInfo</button>
                        </center>
                    </div>
                </div>
            </div>

        </div>

  

}

        <div class="@EducationDetailsContent">

  @foreach(var educationDetails in EducationDetails1)
                        {
            <div class="content">
                <div class="card">
                    <div class="container-card bg-blue-box">
                         <p class="card-title">@educationDetails.TITLE</p>
                         @if(educationDetails.TITLE.ToLower().Contains("school")) Cource = "Class"; else Cource = "Degree";
                         <p class="card-description">Year: @educationDetails.YEAR<br />@Cource :@educationDetails.CLASS<br />Institute:@educationDetails.INSTITUTE<br />CGPA:@educationDetails.PERCENTAGE</p>
                        <center>
                                <button class="btnclass">Manage Your @educationDetails.TITLE Info</button>
                        </center>
                    </div>
                </div>
            </div>
            }
        </div>

    </div>

</div>
<div class="@managebox">
     <div class="ManageInfo">
        <button type="button" @onclick=@(() => managebox ="hide")><i class="fa fa-plus-circle" style="transform: rotate(45deg);color:lightcoral;"></i></button>
    
     
     </div>

</div>





@code {
    List<tblEducationDetails>? EducationDetails1 = new List<tblEducationDetails>();
    List<tblUserInfo>? tblUserInfo = new List<tblUserInfo>();
    UserServices userService = new UserServices();
    public string? PersonalDetailsContent{ get; set; }
    public string? EducationDetailsContent { get; set; }
    public string? ExperienceDetailsContent { get; set; }
    public string? managebox { get; set; }
    private string? imageSource;
    private string? Cource { get; set; }

    protected override async Task OnInitializedAsync()
    {
        tblUserInfo = userService.GetPersonalInfo();
        //Image = await dbContext.Images.FindAsync(Id);
    }

    protected override void OnInitialized()
    {


        managebox = "hide";

        PersonalDetailsContent = "show";
        EducationDetailsContent = "hide";
        ExperienceDetailsContent = "hide";
        imageSource = $"css/images/UserImage{1}.png";
        EducationDetails1 = userService.Education();

        // tblUserInfo = userService.GetPersonalInfo();
    }

    private void PersonalDetails()
    {
        PersonalDetailsContent = "show";
        EducationDetailsContent = "hide";
        ExperienceDetailsContent = "hide";

    }
    private void EducationDetails()
    {
        PersonalDetailsContent = "hide";
        EducationDetailsContent = "show";
        ExperienceDetailsContent = "hide";
    }
    private void ExperienceDetails()
    {
        PersonalDetailsContent = "hide";
        EducationDetailsContent = "hide";
        ExperienceDetailsContent = "show";

    }
    private void manageboxinfo()
    {
        managebox = "show";
    }
    //private void cancelbtn()
    //{
    //    managebox = "hide";
    //}

}


     
  
   

 